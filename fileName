-- H2 2.1.210;
;             
CREATE USER IF NOT EXISTS "SA" SALT 'd5c8dcdab939073b' HASH 'b8c836439c08062251313aa8f93b93535633587d534b95610137ece6ab96cbe2' ADMIN;         
CREATE MEMORY TABLE "PUBLIC"."TB_CATEGORY"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 3) NOT NULL,
    "NAME" CHARACTER VARYING(255)
);   
ALTER TABLE "PUBLIC"."TB_CATEGORY" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_D" PRIMARY KEY("ID");  
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.TB_CATEGORY;             
CREATE MEMORY TABLE "PUBLIC"."TB_PRODUCT"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 5) NOT NULL,
    "NAME" CHARACTER VARYING(255),
    "PRICE" DOUBLE PRECISION
);     
ALTER TABLE "PUBLIC"."TB_PRODUCT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_6" PRIMARY KEY("ID");   
-- 4 +/- SELECT COUNT(*) FROM PUBLIC.TB_PRODUCT;              
CREATE MEMORY TABLE "PUBLIC"."TB_PRODUCT_CATEGORY"(
    "PRODUCT_ID" BIGINT NOT NULL,
    "CATEGORY_ID" BIGINT NOT NULL
); 
-- 4 +/- SELECT COUNT(*) FROM PUBLIC.TB_PRODUCT_CATEGORY;     
CREATE MEMORY TABLE "PUBLIC"."TB_STATE"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 3) NOT NULL,
    "NAME" CHARACTER VARYING(255)
);      
ALTER TABLE "PUBLIC"."TB_STATE" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_60" PRIMARY KEY("ID");    
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.TB_STATE;
CREATE MEMORY TABLE "PUBLIC"."TB_CITY"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 4) NOT NULL,
    "NAME" CHARACTER VARYING(255),
    "STATE_ID" BIGINT
);               
ALTER TABLE "PUBLIC"."TB_CITY" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_D1" PRIMARY KEY("ID");     
-- 3 +/- SELECT COUNT(*) FROM PUBLIC.TB_CITY; 
CREATE MEMORY TABLE "PUBLIC"."TB_CLIENT"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 3) NOT NULL,
    "NAME" CHARACTER VARYING(255),
    "CPF_OR_CNPJ" CHARACTER VARYING(255),
    "TYPE" INTEGER
);     
ALTER TABLE "PUBLIC"."TB_CLIENT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_86" PRIMARY KEY("ID");   
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.TB_CLIENT;               
CREATE MEMORY TABLE "PUBLIC"."TB_ADDRESS"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 3) NOT NULL,
    "STREET" CHARACTER VARYING(255),
    "NUMBER" INTEGER,
    "CEP" CHARACTER VARYING(255),
    "CLIENT_ID" BIGINT,
    "CITY_ID" BIGINT
);        
ALTER TABLE "PUBLIC"."TB_ADDRESS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_D4" PRIMARY KEY("ID");  
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.TB_ADDRESS;              
CREATE MEMORY TABLE "PUBLIC"."TB_CELLPHONE"(
    "CLIENT_ID" BIGINT NOT NULL,
    "CELLPHONE" CHARACTER VARYING(255)
);    
-- 4 +/- SELECT COUNT(*) FROM PUBLIC.TB_CELLPHONE;            
CREATE MEMORY TABLE "PUBLIC"."TB_CREDIT_CARD_PAYMENT"(
    "NUMBER_OF_INSTALLEMNTS" INTEGER,
    "ORDER_ID" BIGINT NOT NULL
);             
ALTER TABLE "PUBLIC"."TB_CREDIT_CARD_PAYMENT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_5" PRIMARY KEY("ORDER_ID"); 
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.TB_CREDIT_CARD_PAYMENT;  
CREATE MEMORY TABLE "PUBLIC"."TB_SLIP_PAYMENT"(
    "DUE_DATE" TIMESTAMP,
    "PAY_DATE" TIMESTAMP,
    "ORDER_ID" BIGINT NOT NULL
);     
ALTER TABLE "PUBLIC"."TB_SLIP_PAYMENT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_7" PRIMARY KEY("ORDER_ID");        
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.TB_SLIP_PAYMENT;         
CREATE MEMORY TABLE "PUBLIC"."TB_PAYMENT"(
    "ORDER_ID" BIGINT NOT NULL,
    "PAYMENT_STATUS" INTEGER
); 
ALTER TABLE "PUBLIC"."TB_PAYMENT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_E" PRIMARY KEY("ORDER_ID");             
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.TB_PAYMENT;              
CREATE MEMORY TABLE "PUBLIC"."TB_ORDER"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "INSTANT" TIMESTAMP,
    "CLIENT_ID" BIGINT,
    "DELIVERY_ADDRES_ID" BIGINT,
    "DELIVERY_ADDRESS_ID" BIGINT
); 
ALTER TABLE "PUBLIC"."TB_ORDER" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_5F" PRIMARY KEY("ID");    
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.TB_ORDER;
ALTER TABLE "PUBLIC"."TB_CLIENT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_8" UNIQUE("CPF_OR_CNPJ");
ALTER TABLE "PUBLIC"."TB_CELLPHONE" ADD CONSTRAINT "PUBLIC"."FKTAJ9H8P880WY0SABNHQTSGST8" FOREIGN KEY("CLIENT_ID") REFERENCES "PUBLIC"."TB_CLIENT"("ID") NOCHECK;             
ALTER TABLE "PUBLIC"."TB_PRODUCT_CATEGORY" ADD CONSTRAINT "PUBLIC"."FKGBOF0JCLMAF8WN2ALSOEXXQ3U" FOREIGN KEY("PRODUCT_ID") REFERENCES "PUBLIC"."TB_PRODUCT"("ID") NOCHECK;    
ALTER TABLE "PUBLIC"."TB_SLIP_PAYMENT" ADD CONSTRAINT "PUBLIC"."FKEME177R4B4J01OKBB4EHLOXWK" FOREIGN KEY("ORDER_ID") REFERENCES "PUBLIC"."TB_PAYMENT"("ORDER_ID") NOCHECK;    
ALTER TABLE "PUBLIC"."TB_CREDIT_CARD_PAYMENT" ADD CONSTRAINT "PUBLIC"."FK_ORDER_ID" FOREIGN KEY("ORDER_ID") REFERENCES "PUBLIC"."TB_PAYMENT"("ORDER_ID") NOCHECK;             
ALTER TABLE "PUBLIC"."TB_PAYMENT" ADD CONSTRAINT "PUBLIC"."FKOKAF4IL2CWIT4H780C25DV04R" FOREIGN KEY("ORDER_ID") REFERENCES "PUBLIC"."TB_ORDER"("ID") NOCHECK; 
ALTER TABLE "PUBLIC"."TB_ORDER" ADD CONSTRAINT "PUBLIC"."FK85TW4VL1JRR095YN152TOE1GS" FOREIGN KEY("DELIVERY_ADDRESS_ID") REFERENCES "PUBLIC"."TB_ADDRESS"("ID") NOCHECK;      
ALTER TABLE "PUBLIC"."TB_ADDRESS" ADD CONSTRAINT "PUBLIC"."FK_CITY_ID" FOREIGN KEY("CITY_ID") REFERENCES "PUBLIC"."TB_CITY"("ID") NOCHECK;    
ALTER TABLE "PUBLIC"."TB_ORDER" ADD CONSTRAINT "PUBLIC"."FK7C9OF0P9OGX0W8SFREBT4N9KK" FOREIGN KEY("CLIENT_ID") REFERENCES "PUBLIC"."TB_CLIENT"("ID") NOCHECK; 
ALTER TABLE "PUBLIC"."TB_ADDRESS" ADD CONSTRAINT "PUBLIC"."FK_CLIENT_ID" FOREIGN KEY("CLIENT_ID") REFERENCES "PUBLIC"."TB_CLIENT"("ID") NOCHECK;              
ALTER TABLE "PUBLIC"."TB_CITY" ADD CONSTRAINT "PUBLIC"."FK1RN7OTY4MWQVIYW8VK67CRAPO" FOREIGN KEY("STATE_ID") REFERENCES "PUBLIC"."TB_STATE"("ID") NOCHECK;    
ALTER TABLE "PUBLIC"."TB_PRODUCT_CATEGORY" ADD CONSTRAINT "PUBLIC"."FK5R4SBAVB4NKD9XPL0F095QS2A" FOREIGN KEY("CATEGORY_ID") REFERENCES "PUBLIC"."TB_CATEGORY"("ID") NOCHECK;  
