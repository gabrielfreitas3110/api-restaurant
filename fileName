-- H2 2.1.210;
;             
CREATE USER IF NOT EXISTS "SA" SALT '51d61f82b5e315cc' HASH 'edace052adfc4df88d12aef30beb1dece232620e8adee481adbd862dcdf499f2' ADMIN;         
CREATE MEMORY TABLE "PUBLIC"."TB_CATEGORY"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 3) NOT NULL,
    "NAME" CHARACTER VARYING(255)
);   
ALTER TABLE "PUBLIC"."TB_CATEGORY" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_D" PRIMARY KEY("ID");  
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.TB_CATEGORY;             
CREATE MEMORY TABLE "PUBLIC"."TB_PRODUCT"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 5) NOT NULL,
    "NAME" CHARACTER VARYING(255),
    "PRICE" DOUBLE PRECISION
);     
ALTER TABLE "PUBLIC"."TB_PRODUCT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_6" PRIMARY KEY("ID");   
-- 4 +/- SELECT COUNT(*) FROM PUBLIC.TB_PRODUCT;              
CREATE MEMORY TABLE "PUBLIC"."TB_PRODUCT_CATEGORY"(
    "PRODUCT_ID" BIGINT NOT NULL,
    "CATEGORY_ID" BIGINT NOT NULL
); 
-- 4 +/- SELECT COUNT(*) FROM PUBLIC.TB_PRODUCT_CATEGORY;     
CREATE MEMORY TABLE "PUBLIC"."TB_STATE"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 3) NOT NULL,
    "NAME" CHARACTER VARYING(255)
);      
ALTER TABLE "PUBLIC"."TB_STATE" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_60" PRIMARY KEY("ID");    
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.TB_STATE;
CREATE MEMORY TABLE "PUBLIC"."TB_CITY"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 4) NOT NULL,
    "NAME" CHARACTER VARYING(255),
    "STATE_ID" BIGINT
);               
ALTER TABLE "PUBLIC"."TB_CITY" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_D1" PRIMARY KEY("ID");     
-- 3 +/- SELECT COUNT(*) FROM PUBLIC.TB_CITY; 
CREATE MEMORY TABLE "PUBLIC"."TB_CLIENT"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 3) NOT NULL,
    "NAME" CHARACTER VARYING(255),
    "CPF_OR_CNPJ" CHARACTER VARYING(255),
    "TYPE" INTEGER
);     
ALTER TABLE "PUBLIC"."TB_CLIENT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_86" PRIMARY KEY("ID");   
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.TB_CLIENT;               
CREATE MEMORY TABLE "PUBLIC"."TB_ADDRESS"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 4) NOT NULL,
    "STREET" CHARACTER VARYING(255),
    "NUMBER" INTEGER,
    "CEP" CHARACTER VARYING(255),
    "CLIENT_ID" BIGINT,
    "CITY_ID" BIGINT
);        
ALTER TABLE "PUBLIC"."TB_ADDRESS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_D4" PRIMARY KEY("ID");  
-- 3 +/- SELECT COUNT(*) FROM PUBLIC.TB_ADDRESS;              
CREATE MEMORY TABLE "PUBLIC"."TB_CELLPHONE"(
    "CLIENT_ID" BIGINT NOT NULL,
    "CELLPHONE" CHARACTER VARYING(255)
);    
-- 4 +/- SELECT COUNT(*) FROM PUBLIC.TB_CELLPHONE;            
CREATE MEMORY TABLE "PUBLIC"."TB_CREDIT_CARD_PAYMENT"(
    "NUMBER_OF_INSTALLEMNTS" INTEGER,
    "ORDER_ID" BIGINT NOT NULL
);             
ALTER TABLE "PUBLIC"."TB_CREDIT_CARD_PAYMENT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_5" PRIMARY KEY("ORDER_ID"); 
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.TB_CREDIT_CARD_PAYMENT;  
CREATE MEMORY TABLE "PUBLIC"."TB_SLIP_PAYMENT"(
    "DUE_DATE" TIMESTAMP,
    "PAY_DATE" TIMESTAMP,
    "ORDER_ID" BIGINT NOT NULL
);     
ALTER TABLE "PUBLIC"."TB_SLIP_PAYMENT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_7" PRIMARY KEY("ORDER_ID");        
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.TB_SLIP_PAYMENT;         
CREATE MEMORY TABLE "PUBLIC"."TB_PAYMENT"(
    "ORDER_ID" BIGINT NOT NULL,
    "PAYMENT_STATUS" INTEGER
); 
ALTER TABLE "PUBLIC"."TB_PAYMENT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_E" PRIMARY KEY("ORDER_ID");             
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.TB_PAYMENT;              
CREATE MEMORY TABLE "PUBLIC"."TB_ORDER"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 3) NOT NULL,
    "INSTANT" TIMESTAMP,
    "CLIENT_ID" BIGINT,
    "DELIVERY_ADDRESS_ID" BIGINT
);    
ALTER TABLE "PUBLIC"."TB_ORDER" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_5F" PRIMARY KEY("ID");    
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.TB_ORDER;
CREATE MEMORY TABLE "PUBLIC"."ORDER_ITEM"(
    "DISCOUNT" DOUBLE PRECISION,
    "PRICE" DOUBLE PRECISION,
    "QUANTITY" INTEGER,
    "PRODUCT_ID" BIGINT NOT NULL,
    "ORDER_ID" BIGINT NOT NULL
);   
ALTER TABLE "PUBLIC"."ORDER_ITEM" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4" PRIMARY KEY("ORDER_ID", "PRODUCT_ID");               
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.ORDER_ITEM;              
ALTER TABLE "PUBLIC"."TB_CLIENT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_8" UNIQUE("CPF_OR_CNPJ");
ALTER TABLE "PUBLIC"."TB_PRODUCT_CATEGORY" ADD CONSTRAINT "PUBLIC"."FK_PRODUCT_CATEGORY_CATEGORY_ID" FOREIGN KEY("CATEGORY_ID") REFERENCES "PUBLIC"."TB_CATEGORY"("ID") NOCHECK;              
ALTER TABLE "PUBLIC"."TB_ORDER" ADD CONSTRAINT "PUBLIC"."FK_ORDER_DELIVERY_ADDRESS_ID" FOREIGN KEY("DELIVERY_ADDRESS_ID") REFERENCES "PUBLIC"."TB_ADDRESS"("ID") NOCHECK;     
ALTER TABLE "PUBLIC"."TB_ADDRESS" ADD CONSTRAINT "PUBLIC"."FK_ADDRESS_CLIENT_ID" FOREIGN KEY("CLIENT_ID") REFERENCES "PUBLIC"."TB_CLIENT"("ID") NOCHECK;      
ALTER TABLE "PUBLIC"."TB_PAYMENT" ADD CONSTRAINT "PUBLIC"."FK_PAYMENT_ORDER_ID" FOREIGN KEY("ORDER_ID") REFERENCES "PUBLIC"."TB_ORDER"("ID") NOCHECK;         
ALTER TABLE "PUBLIC"."TB_ORDER" ADD CONSTRAINT "PUBLIC"."FK_ORDER_CLIENT_ID" FOREIGN KEY("CLIENT_ID") REFERENCES "PUBLIC"."TB_CLIENT"("ID") NOCHECK;          
ALTER TABLE "PUBLIC"."ORDER_ITEM" ADD CONSTRAINT "PUBLIC"."FKR7NG2Q2YEVTEBR06YNQK23PH7" FOREIGN KEY("PRODUCT_ID") REFERENCES "PUBLIC"."TB_PRODUCT"("ID") NOCHECK;             
ALTER TABLE "PUBLIC"."TB_CELLPHONE" ADD CONSTRAINT "PUBLIC"."FK_CELLPHONE_CLIENT_ID" FOREIGN KEY("CLIENT_ID") REFERENCES "PUBLIC"."TB_CLIENT"("ID") NOCHECK;  
ALTER TABLE "PUBLIC"."TB_CITY" ADD CONSTRAINT "PUBLIC"."FK_CITY_STATE_ID" FOREIGN KEY("STATE_ID") REFERENCES "PUBLIC"."TB_STATE"("ID") NOCHECK;               
ALTER TABLE "PUBLIC"."TB_PRODUCT_CATEGORY" ADD CONSTRAINT "PUBLIC"."FK_PRODUCT_CATEGORY_PRODUCT_ID" FOREIGN KEY("PRODUCT_ID") REFERENCES "PUBLIC"."TB_PRODUCT"("ID") NOCHECK; 
ALTER TABLE "PUBLIC"."TB_ADDRESS" ADD CONSTRAINT "PUBLIC"."FK_ADDRESS_CITY_ID" FOREIGN KEY("CITY_ID") REFERENCES "PUBLIC"."TB_CITY"("ID") NOCHECK;            
ALTER TABLE "PUBLIC"."TB_CREDIT_CARD_PAYMENT" ADD CONSTRAINT "PUBLIC"."FK_CREDIT_CARD_PAYMENT_ORDER_ID" FOREIGN KEY("ORDER_ID") REFERENCES "PUBLIC"."TB_PAYMENT"("ORDER_ID") NOCHECK;         
ALTER TABLE "PUBLIC"."TB_SLIP_PAYMENT" ADD CONSTRAINT "PUBLIC"."FK_SLIP_PAYMENT_ORDER_ID" FOREIGN KEY("ORDER_ID") REFERENCES "PUBLIC"."TB_PAYMENT"("ORDER_ID") NOCHECK;       
ALTER TABLE "PUBLIC"."ORDER_ITEM" ADD CONSTRAINT "PUBLIC"."FK967BBC2DE8E8QULJXC380TMWF" FOREIGN KEY("ORDER_ID") REFERENCES "PUBLIC"."TB_ORDER"("ID") NOCHECK; 
